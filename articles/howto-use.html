<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How to use EPos-MoL • eposmol</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="How to use EPos-MoL">
<meta property="og:description" content="eposmol">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">eposmol</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/howto-use.html">How to use EPos-MoL</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/lifs-tools/empirical-lipid-ms-score/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>How to use EPos-MoL</h1>
                        <h4 data-toc-skip class="author">Nils
Hoffmann</h4>
            
            <h4 data-toc-skip class="date">2024-07-02</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/lifs-tools/empirical-lipid-ms-score/blob/HEAD/vignettes/howto-use.Rmd" class="external-link"><code>vignettes/howto-use.Rmd</code></a></small>
      <div class="hidden name"><code>howto-use.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>This vignette provides an introduction to the eposmol library. The
eposmol library is a library for the scoring of lipid species identified
in mass spectrometry experiments, based on their eposmol class and using
their molecular properties and fragments. The library is used in the
EPos-MoL R-Shiny web application where users can upload identification
tables created with their software, where individual lipid species and
their identified features are listed in.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>In order to use the eposmol library, please install the package from
an active R session first:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"lifs-tools/empirical-lipid-ms-score"</span><span class="op">)</span></span></code></pre></div>
<p>For the examples in this vignette, we will use the following
libraries:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org" class="external-link">readxl</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lifs-tools/rgoslin" class="external-link">rgoslin</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/" class="external-link">here</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lifs-tools/empirical-lipid-ms-score" class="external-link">eposmol</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="scoring-and-mapping-tables">Scoring and Mapping Tables<a class="anchor" aria-label="anchor" href="#scoring-and-mapping-tables"></a>
</h2>
<p>The main scoring table is located in the file
<code>Table_1.xlsx</code> (below <code>inst/extdata</code>). This table
contains the scoring scheme for the identification of lipid species
based on their eposmol class, using their molecular properties and
fragments.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">scoringScheme</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">read_excel</a></span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"inst"</span>,<span class="st">"extdata"</span>,<span class="st">"Table_1.xlsx"</span><span class="op">)</span>,</span>
<span>  sheet <span class="op">=</span> <span class="st">"Scoring scheme"</span>, </span>
<span>  range <span class="op">=</span> <span class="st">"A1:X30"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">scoringScheme</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 29 × 24</span></span></span>
<span><span class="co">#&gt;    Primary Secondary  Fragment Evidence ID    Unknown    FA `FA mod`    MG    DG</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> MS1     Molecular… <span style="color: #BB0000;">NA</span>       Nominal… L1.1       10    10       10     8    10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> MS1     Molecular… <span style="color: #BB0000;">NA</span>       Mass 5p… L1.2       30    30       30    24    30</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> MS1     Molecular… <span style="color: #BB0000;">NA</span>       Mass 1p… L1.3       40    40       40    32    40</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> MS1     Molecular… <span style="color: #BB0000;">NA</span>       Chromat… L1.4       10    10       10    10    10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> MS1     Molecular… <span style="color: #BB0000;">NA</span>       Ion mob… L1.5       10    10       10    10    10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> MS2     CID fragm… <span style="color: #BB0000;">NA</span>       Fragmen… L2.1       15    15       15    15    15</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> MS2     CID fragm… LCF      Headgro… L2.2       12    12       12     0     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> MS2     CID fragm… LCF      Headgro… L2.3        8     8        8     0     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> MS2     CID fragm… LCF      Headgro… L2.4        4     4        4     0     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> MS2     CID fragm… LCF      Headgro… L2.5        4     4        4     0     0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 19 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 14 more variables: TG &lt;dbl&gt;, PL &lt;dbl&gt;, PIP &lt;dbl&gt;, CL &lt;dbl&gt;, LPL &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `N-mod PL` &lt;dbl&gt;, oxPL &lt;dbl&gt;, SPB &lt;dbl&gt;, SP &lt;dbl&gt;, LSM &lt;dbl&gt;, CerIP &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   Gan &lt;dbl&gt;, `Cer OH` &lt;dbl&gt;, ST &lt;dbl&gt;</span></span></span></code></pre></div>
<p>The mapping of LIPID MAPS categories and classes is in the
<code>class_map.xlsx</code> table (below <code>inst/extdata</code>).
This table can be used to map the lipid names from LIPID MAPS or as
parsed by the Goslin library to the eposmol categories and classes. If
you do not use the Goslin library to parse lipid names, or you are using
<a href="https://github.com/lifs-tools/goslin/issues/new?assignees=&amp;labels=&amp;projects=&amp;template=feature_request.md&amp;title=" class="external-link">currently
unsupported lipid classes or categories</a>, you will need to manually
assign the correct eposmol class to your lipid scoring input before
supplying it to the scoring function.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">classMap</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html" class="external-link">read_excel</a></span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"inst"</span>,<span class="st">"extdata"</span>,<span class="st">"class_map.xlsx"</span><span class="op">)</span>,</span>
<span>  sheet <span class="op">=</span> <span class="st">"class_map"</span>, </span>
<span>  range <span class="op">=</span> <span class="st">"A1:B88"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">classMap</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 87 × 2</span></span></span>
<span><span class="co">#&gt;    LipidMapsCategoryOrClass EposmolCategoryOrClass</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> BA                       BA                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> BMP                      PL                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> CAR                      FA mod                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> CL                       CL                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> CoA                      FA mod                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> DG                       DG                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> DLCL                     CL                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Docosanoids              FA mod                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Eicosanoids              FA mod                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> EPC                      CerIP                 </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 77 more rows</span></span></span></code></pre></div>
<p>We will transform the scoring scheme table into a long format table
for easier access to the scoring values.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">scoringSchemeLong</span> <span class="op">&lt;-</span> <span class="va">scoringScheme</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols<span class="op">=</span><span class="op">!</span><span class="va">Primary</span><span class="op">:</span><span class="va">ID</span>, </span>
<span>    names_to <span class="op">=</span> <span class="st">"EposmolCategoryOrClass"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">scoringSchemeLong</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 551 × 7</span></span></span>
<span><span class="co">#&gt;    Primary Secondary        Fragment Evidence ID    EposmolCategoryOrClass value</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> MS1     Molecular prope… <span style="color: #BB0000;">NA</span>       Nominal… L1.1  Unknown                   10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> MS1     Molecular prope… <span style="color: #BB0000;">NA</span>       Nominal… L1.1  FA                        10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> MS1     Molecular prope… <span style="color: #BB0000;">NA</span>       Nominal… L1.1  FA mod                    10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> MS1     Molecular prope… <span style="color: #BB0000;">NA</span>       Nominal… L1.1  MG                         8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> MS1     Molecular prope… <span style="color: #BB0000;">NA</span>       Nominal… L1.1  DG                        10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> MS1     Molecular prope… <span style="color: #BB0000;">NA</span>       Nominal… L1.1  TG                        10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> MS1     Molecular prope… <span style="color: #BB0000;">NA</span>       Nominal… L1.1  PL                         8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> MS1     Molecular prope… <span style="color: #BB0000;">NA</span>       Nominal… L1.1  PIP                       10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> MS1     Molecular prope… <span style="color: #BB0000;">NA</span>       Nominal… L1.1  CL                        20</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> MS1     Molecular prope… <span style="color: #BB0000;">NA</span>       Nominal… L1.1  LPL                       10</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 541 more rows</span></span></span></code></pre></div>
<p>The following examples are also contained in the
<code>Table_5.xlsx</code> file in the <code>inst/extdata</code> folder.
The examples use the same scoring scheme as the main scoring table.</p>
</div>
<div class="section level2">
<h2 id="example-a">Example a<a class="anchor" aria-label="anchor" href="#example-a"></a>
</h2>
<p>This example assigns points for identification of a Ceramide with one
long chain base with 18 carbon atoms, one double bond and a fatty acyl
with 16 carbon atoms and no double bond. Identification was performed in
positive mode on a triple quadrupole instrument with UHPLC separation.
We here assign points for nominal mass accuracy, chromatography and the
primary head group CID fragment.</p>
<p>You can use the <code>mapCategoryOrClass</code> function to map the
LIPID MAPS category or class to the eposmol category or class.</p>
<table class="table"><tbody>
<tr class="odd">
<td>Platform</td>
<td>TQ EVOQ Elite</td>
</tr>
<tr class="even">
<td>Separation</td>
<td>UHPLC</td>
</tr>
<tr class="odd">
<td>MS Mode</td>
<td>MRM</td>
</tr>
<tr class="even">
<td>Ion Mode</td>
<td>(+)</td>
</tr>
</tbody></table>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex_a</span> <span class="op">&lt;-</span> <span class="st">"Cer 18:1;O2/16:0"</span></span>
<span><span class="co"># parse name with Goslin and add eposmol class based on mapCategoryOrClass, using the default classMap</span></span>
<span><span class="va">ex_a_norm</span> <span class="op">&lt;-</span> <span class="fu">rgoslin</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rgoslin/man/parseLipidNames.html" class="external-link">parseLipidNames</a></span><span class="op">(</span><span class="va">ex_a</span><span class="op">)</span></span>
<span><span class="va">ex_a_norm</span> <span class="op">&lt;-</span> <span class="va">ex_a_norm</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>eposmolCategoryOrClass <span class="op">=</span> <span class="fu"><a href="../reference/mapCategoryOrClass.html">mapCategoryOrClass</a></span><span class="op">(</span><span class="va">ex_a_norm</span><span class="op">$</span><span class="va">Lipid.Maps.Category</span>, <span class="va">classMap</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">ex_a_norm</span></span>
<span><span class="co">#&gt;    Normalized.Name    Original.Name       Grammar Message Adduct Adduct.Charge</span></span>
<span><span class="co">#&gt; 1 Cer 18:1;O2/16:0 Cer 18:1;O2/16:0 Shorthand2020      NA     NA             0</span></span>
<span><span class="co">#&gt;   Lipid.Maps.Category Lipid.Maps.Main.Class Species.Name Extended.Species.Name</span></span>
<span><span class="co">#&gt; 1                  SP                   Cer  Cer 34:1;O2                   Cer</span></span>
<span><span class="co">#&gt;   Molecular.Species.Name Sn.Position.Name Structure.Defined.Name</span></span>
<span><span class="co">#&gt; 1       Cer 18:1;O2/16:0 Cer 18:1;O2/16:0                     NA</span></span>
<span><span class="co">#&gt;   Full.Structure.Name Functional.Class.Abbr Functional.Class.Synonyms</span></span>
<span><span class="co">#&gt; 1                  NA                 [Cer]           [Cer, Ceramide]</span></span>
<span><span class="co">#&gt;         Level Total.C Total.OH Total.O Total.DB     Mass Sum.Formula</span></span>
<span><span class="co">#&gt; 1 SN_POSITION      34        0       2        1 537.5121   C34H67NO3</span></span>
<span><span class="co">#&gt;   FA1.Position FA1.C FA1.OH FA1.O FA1.DB FA1.Bond.Type FA1.DB.Positions</span></span>
<span><span class="co">#&gt; 1            2    16      0     0      0         ESTER               []</span></span>
<span><span class="co">#&gt;   FA2.Position FA2.C FA2.OH FA2.O FA2.DB FA2.Bond.Type FA2.DB.Positions</span></span>
<span><span class="co">#&gt; 1           NA    NA     NA    NA     NA          &lt;NA&gt;             &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   LCB.Position LCB.C LCB.OH LCB.O LCB.DB LCB.Bond.Type LCB.DB.Positions</span></span>
<span><span class="co">#&gt; 1            1    18      0     2      1           LCB               []</span></span>
<span><span class="co">#&gt;   FA3.Position FA3.C FA3.OH FA3.O FA3.DB FA3.Bond.Type FA3.DB.Positions</span></span>
<span><span class="co">#&gt; 1           NA    NA     NA    NA     NA          &lt;NA&gt;             &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   FA4.Position FA4.C FA4.OH FA4.O FA4.DB FA4.Bond.Type FA4.DB.Positions</span></span>
<span><span class="co">#&gt; 1           NA    NA     NA    NA     NA          &lt;NA&gt;             &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   eposmolCategoryOrClass</span></span>
<span><span class="co">#&gt; 1                     SP</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex_a_lipidCategoryOrClass</span> <span class="op">&lt;-</span> <span class="va">ex_a_norm</span><span class="op">[</span><span class="fl">1</span>, <span class="st">"eposmolCategoryOrClass"</span><span class="op">]</span></span>
<span><span class="va">nominalMassPos</span> <span class="op">&lt;-</span> <span class="va">scoringSchemeLong</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">Primary</span><span class="op">==</span><span class="st">"MS1"</span> <span class="op">&amp;</span> </span>
<span>    <span class="va">Secondary</span><span class="op">==</span><span class="st">"Molecular properties"</span> <span class="op">&amp;</span></span>
<span>    <span class="va">Evidence</span><span class="op">==</span><span class="st">"Nominal mass"</span> <span class="op">&amp;</span>  </span>
<span>    <span class="va">EposmolCategoryOrClass</span><span class="op">==</span><span class="va">ex_a_lipidCategoryOrClass</span></span>
<span>  <span class="op">)</span><span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span>
<span><span class="va">separation</span> <span class="op">&lt;-</span> <span class="va">scoringSchemeLong</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">Primary</span><span class="op">==</span><span class="st">"MS1"</span> <span class="op">&amp;</span></span>
<span>    <span class="va">Secondary</span><span class="op">==</span><span class="st">"Molecular properties"</span> <span class="op">&amp;</span>  </span>
<span>    <span class="va">Evidence</span><span class="op">==</span><span class="st">"Chromatography (RT)"</span> <span class="op">&amp;</span>  </span>
<span>    <span class="va">EposmolCategoryOrClass</span><span class="op">==</span><span class="va">ex_a_lipidCategoryOrClass</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span>
<span><span class="va">headGroup</span> <span class="op">&lt;-</span> <span class="va">scoringSchemeLong</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">Primary</span><span class="op">==</span><span class="st">"MS2"</span> <span class="op">&amp;</span></span>
<span>    <span class="va">Secondary</span><span class="op">==</span><span class="st">"CID fragments"</span> <span class="op">&amp;</span>  </span>
<span>    <span class="va">Fragment</span><span class="op">==</span><span class="st">"LCF"</span> <span class="op">&amp;</span>  </span>
<span>    <span class="va">Evidence</span><span class="op">==</span><span class="st">"Headgroup 1"</span> <span class="op">&amp;</span>  </span>
<span>    <span class="va">EposmolCategoryOrClass</span><span class="op">==</span><span class="va">ex_a_lipidCategoryOrClass</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span>
<span><span class="va">score</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span>  </span>
<span>  <span class="va">nominalMassPos</span>,</span>
<span>  <span class="va">separation</span>,</span>
<span>  <span class="va">headGroup</span></span>
<span><span class="op">)</span>                                                                        </span>
<span><span class="va">score</span></span>
<span><span class="co">#&gt; [1] 35</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-b">Example b<a class="anchor" aria-label="anchor" href="#example-b"></a>
</h2>
<p>Example b assigns points for identification of a Ceramide with one
long chain base and a fatty acyl, both with 18 carbon atoms and one
double bond each. Identification was performed in positive and negative
mode on a low resolution QTrap instrument, without prior separation. We
thus assign points for nominal mass accuracy in positive and negative
mode, additional CID fragments for MS2 in both modes and the primary
fatty acyl fragment for negative mode.</p>
<table class="table"><tbody>
<tr class="odd">
<td>Platform</td>
<td>QTrap 6500</td>
</tr>
<tr class="even">
<td>Separation</td>
<td>NA</td>
</tr>
<tr class="odd">
<td>MS Mode</td>
<td>Precursor Ion Scan</td>
</tr>
<tr class="even">
<td>Ion Mode</td>
<td>(+) &amp; (-)</td>
</tr>
</tbody></table>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex_b</span> <span class="op">&lt;-</span> <span class="st">"Cer 18:1;O2/18:1"</span></span>
<span><span class="va">ex_b_norm</span> <span class="op">&lt;-</span> <span class="fu">rgoslin</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rgoslin/man/parseLipidNames.html" class="external-link">parseLipidNames</a></span><span class="op">(</span><span class="va">ex_b</span><span class="op">)</span></span>
<span><span class="va">ex_b_norm</span> <span class="op">&lt;-</span> <span class="va">ex_b_norm</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>eposmolCategoryOrClass <span class="op">=</span> <span class="fu"><a href="../reference/mapCategoryOrClass.html">mapCategoryOrClass</a></span><span class="op">(</span><span class="va">ex_b_norm</span><span class="op">$</span><span class="va">Lipid.Maps.Category</span>, <span class="va">classMap</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">ex_b_norm</span></span>
<span><span class="co">#&gt;    Normalized.Name    Original.Name       Grammar Message Adduct Adduct.Charge</span></span>
<span><span class="co">#&gt; 1 Cer 18:1;O2/18:1 Cer 18:1;O2/18:1 Shorthand2020      NA     NA             0</span></span>
<span><span class="co">#&gt;   Lipid.Maps.Category Lipid.Maps.Main.Class Species.Name Extended.Species.Name</span></span>
<span><span class="co">#&gt; 1                  SP                   Cer  Cer 36:2;O2                   Cer</span></span>
<span><span class="co">#&gt;   Molecular.Species.Name Sn.Position.Name Structure.Defined.Name</span></span>
<span><span class="co">#&gt; 1       Cer 18:1;O2/18:1 Cer 18:1;O2/18:1                     NA</span></span>
<span><span class="co">#&gt;   Full.Structure.Name Functional.Class.Abbr Functional.Class.Synonyms</span></span>
<span><span class="co">#&gt; 1                  NA                 [Cer]           [Cer, Ceramide]</span></span>
<span><span class="co">#&gt;         Level Total.C Total.OH Total.O Total.DB     Mass Sum.Formula</span></span>
<span><span class="co">#&gt; 1 SN_POSITION      36        0       2        2 563.5277   C36H69NO3</span></span>
<span><span class="co">#&gt;   FA1.Position FA1.C FA1.OH FA1.O FA1.DB FA1.Bond.Type FA1.DB.Positions</span></span>
<span><span class="co">#&gt; 1            2    18      0     0      1         ESTER               []</span></span>
<span><span class="co">#&gt;   FA2.Position FA2.C FA2.OH FA2.O FA2.DB FA2.Bond.Type FA2.DB.Positions</span></span>
<span><span class="co">#&gt; 1           NA    NA     NA    NA     NA          &lt;NA&gt;             &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   LCB.Position LCB.C LCB.OH LCB.O LCB.DB LCB.Bond.Type LCB.DB.Positions</span></span>
<span><span class="co">#&gt; 1            1    18      0     2      1           LCB               []</span></span>
<span><span class="co">#&gt;   FA3.Position FA3.C FA3.OH FA3.O FA3.DB FA3.Bond.Type FA3.DB.Positions</span></span>
<span><span class="co">#&gt; 1           NA    NA     NA    NA     NA          &lt;NA&gt;             &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   FA4.Position FA4.C FA4.OH FA4.O FA4.DB FA4.Bond.Type FA4.DB.Positions</span></span>
<span><span class="co">#&gt; 1           NA    NA     NA    NA     NA          &lt;NA&gt;             &lt;NA&gt;</span></span>
<span><span class="co">#&gt;   eposmolCategoryOrClass</span></span>
<span><span class="co">#&gt; 1                     SP</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex_b_lipidCategoryOrClass</span> <span class="op">&lt;-</span> <span class="va">ex_b_norm</span><span class="op">[</span><span class="fl">1</span>, <span class="st">"eposmolCategoryOrClass"</span><span class="op">]</span></span>
<span><span class="va">nominalMassPos</span> <span class="op">&lt;-</span> <span class="va">scoringSchemeLong</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">Primary</span><span class="op">==</span><span class="st">"MS1"</span> <span class="op">&amp;</span> </span>
<span>    <span class="va">Secondary</span><span class="op">==</span><span class="st">"Molecular properties"</span> <span class="op">&amp;</span></span>
<span>    <span class="va">Evidence</span><span class="op">==</span><span class="st">"Nominal mass"</span> <span class="op">&amp;</span>  </span>
<span>    <span class="va">EposmolCategoryOrClass</span><span class="op">==</span><span class="va">ex_b_lipidCategoryOrClass</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span>
<span><span class="va">headGroup1Pos</span> <span class="op">&lt;-</span> <span class="va">scoringSchemeLong</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">Primary</span><span class="op">==</span><span class="st">"MS2"</span> <span class="op">&amp;</span></span>
<span>    <span class="va">Secondary</span><span class="op">==</span><span class="st">"CID fragments"</span> <span class="op">&amp;</span>  </span>
<span>    <span class="va">Fragment</span><span class="op">==</span><span class="st">"LCF"</span> <span class="op">&amp;</span>  </span>
<span>    <span class="va">Evidence</span><span class="op">==</span><span class="st">"Headgroup 1"</span> <span class="op">&amp;</span>  </span>
<span>    <span class="va">EposmolCategoryOrClass</span><span class="op">==</span><span class="va">ex_b_lipidCategoryOrClass</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span>
<span><span class="va">nominalMassNeg</span> <span class="op">&lt;-</span> <span class="va">scoringSchemeLong</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">Primary</span><span class="op">==</span><span class="st">"MS1"</span> <span class="op">&amp;</span> </span>
<span>    <span class="va">Secondary</span><span class="op">==</span><span class="st">"Molecular properties"</span> <span class="op">&amp;</span></span>
<span>    <span class="va">Evidence</span><span class="op">==</span><span class="st">"Nominal mass"</span> <span class="op">&amp;</span>  </span>
<span>    <span class="va">EposmolCategoryOrClass</span><span class="op">==</span><span class="va">ex_b_lipidCategoryOrClass</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span>
<span><span class="va">headGroup1Neg</span> <span class="op">&lt;-</span> <span class="va">scoringSchemeLong</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">Primary</span><span class="op">==</span><span class="st">"MS2"</span> <span class="op">&amp;</span></span>
<span>    <span class="va">Secondary</span><span class="op">==</span><span class="st">"CID fragments"</span> <span class="op">&amp;</span>  </span>
<span>    <span class="va">Fragment</span><span class="op">==</span><span class="st">"LCF"</span> <span class="op">&amp;</span>  </span>
<span>    <span class="va">Evidence</span><span class="op">==</span><span class="st">"Headgroup 2"</span> <span class="op">&amp;</span>  </span>
<span>    <span class="va">EposmolCategoryOrClass</span><span class="op">==</span><span class="va">ex_b_lipidCategoryOrClass</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span>
<span><span class="va">fa1Neg</span> <span class="op">&lt;-</span> <span class="va">scoringSchemeLong</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">Primary</span><span class="op">==</span><span class="st">"MS2"</span> <span class="op">&amp;</span></span>
<span>    <span class="va">Secondary</span><span class="op">==</span><span class="st">"CID fragments"</span> <span class="op">&amp;</span>  </span>
<span>    <span class="va">Fragment</span><span class="op">==</span><span class="st">"MLF"</span> <span class="op">&amp;</span>  </span>
<span>    <span class="va">Evidence</span><span class="op">==</span><span class="st">"Fatty acyl 1-1"</span> <span class="op">&amp;</span>  </span>
<span>    <span class="va">EposmolCategoryOrClass</span><span class="op">==</span><span class="va">ex_b_lipidCategoryOrClass</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span>
<span><span class="va">score</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span>  </span>
<span>  <span class="va">nominalMassPos</span>,</span>
<span>  <span class="va">headGroup1Pos</span>,</span>
<span>  <span class="va">nominalMassNeg</span>,</span>
<span>  <span class="va">headGroup1Neg</span>,</span>
<span>  <span class="va">fa1Neg</span></span>
<span><span class="op">)</span>                                                                        </span>
<span><span class="va">score</span></span>
<span><span class="co">#&gt; [1] 60</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="running-the-r-shiny-webapplication">Running the R-Shiny Webapplication<a class="anchor" aria-label="anchor" href="#running-the-r-shiny-webapplication"></a>
</h2>
<p>The eposmol library is used in the EPos-MoL R-Shiny web application.
Once you have installed the eposmol library, the web application can be
started from an R session with the following command:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">eposmol</span><span class="fu">::</span><span class="fu"><a href="../reference/run_eposmol_app.html">run_eposmol_app</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The web application contains additional documentation detailing the
input and output formats, as well as the scoring scheme used in the
library. It further provides a user interface to upload identification
tables and download the scored tables. The Shiny web application expects
the eposmol category or class to be provided as a string in the
<code>LipidCategoryOrClass</code> column.</p>
<p>A live version of the web application is available at <a href="https://apps.lifs-tools.org/p/app/eposmol" class="external-link">https://apps.lifs-tools.org/p/app/eposmol</a>.</p>
<p>Please note that the web application is launched individually and
exclusively for every user to provide isolation and data protection from
other users. After your session ends, any uploaded data will be deleted
automatically.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Nils Hoffmann, Harald Köfeler.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
